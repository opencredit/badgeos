(function($){function badgeos_set_current_attributes(shortcode){var result={},attrs=[];attrs=badgeos_get_text_inputs(attrs,shortcode);attrs=badgeos_get_select_inputs(attrs,shortcode);attrs=badgeos_get_select2_inputs(attrs,shortcode);result.shortcode=shortcode;result.params=attrs;return result}function badgeos_get_text_inputs(attrs,shortcode){var inputs=$('#shortcode_options input[type="text"]');$.each(inputs,function(index,el){if(el.className===shortcode&&el.value!=="")attrs.push(el.name+'="'+el.value+
'"')});return attrs}function badgeos_get_select_inputs(attrs,shortcode){var selects=$("#shortcode_options select option:selected");$.each(selects,function(index,el){var $parent=$(this).parent();if($parent.attr("class")===shortcode)attrs.push($parent.attr("name")+'="'+el.text+'"')});return attrs}function badgeos_get_select2_inputs(attrs,shortcode){return attrs}function badgeos_insert_shortcode(){var shortcode,requested;shortcode=$("#select_shortcode option:selected").val();requested=badgeos_set_current_attributes(shortcode);
window.send_to_editor(badgeos_construct_shortcode(requested))}function badgeos_construct_shortcode(requested){var shortcode="[";shortcode+=requested.shortcode;if(requested.params){for(i=0;i<requested.params.length;i++)shortcode+=" "+requested.params[i];$.trim(shortcode)}shortcode+="]";return shortcode}function s2formatResult_users(item){return item.user_login}function s2formatResult_posts(item){return item.post_title}function s2formatSelection(item){return item.ID}$("#select_shortcode").on("change",
function(){var selected=$("#select_shortcode option:selected").val();$(".badgeos_input").parent().hide();$("."+selected).parent().parent().show()});$("#badgeos_insert").on("click",function(e){badgeos_insert_shortcode()});$("#badgeos_cancel").on("click",function(e){e.preventDefault();tb_remove()});$("#badgeos_achievements_list_user_id").select2({ajax:{url:ajaxurl,type:"POST",data:function(term){return{q:term,action:"get-users"}},results:function(data,page){return{results:data.data}}},id:function(object){return object.user_login},
formatResult:s2formatResult_users,formatSelection:s2formatSelection});$("#badgeos_achievement_id,#badgeos_nomination_achievement_id,#badgeos_submission_achievement_id").select2({ajax:{url:ajaxurl,type:"POST",data:function(term){return{q:term,action:"get-posts"}},results:function(data,page){return{results:data.data}}},id:function(object){return object.post_title},formatResult:s2formatResult_posts,formatSelection:s2formatSelection});$("#badgeos_achievements_list_include,#badgeos_achievements_list_exclude").select2({ajax:{url:ajaxurl,
type:"POST",data:function(term){return{q:term,action:"get-posts"}},results:function(data,page){return{results:data.data}}},id:function(object){return object.post_title},formatResult:s2formatResult_posts,formatSelection:s2formatSelection})})(jQuery);
